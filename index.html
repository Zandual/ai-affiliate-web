<!doctype html>
<html lang="en">
  <head>
    <!--
      index.html = the shell of your site.
      Your real UI (product cards, pages, routing) is rendered by AppEntry-*.js into <div id="root"></div>.

      IMPORTANT:
      - Cloudflare Pages + GitHub Pages can be picky about paths.
      - Using <base href="./"> makes relative links work reliably on both.
    -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--
      Base href controls how relative URLs resolve.
      "./" = safest choice for static hosting when your site might be at / or /some-subfolder/.
    -->
    <base href="./" />

    <title>AI Affiliate</title>

    <style>
      /* =============================
         GLOBAL PAGE LOOK & FEEL
         ============================= */

      html,
      body {
        height: 100%;
      }

      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        /* Soft background so the spark feels “premium” but not distracting */
        background: radial-gradient(circle at top, #f5f7ff 0%, #ffffff 55%, #f7f7ff 100%);
        color: #111827; /* near-black */
        overflow-x: hidden;
      }

      /* =============================
         BACKGROUND CANVAS (SPARKS)
         ============================= */

      /* Canvas is fixed and behind everything */
      #spark-canvas {
        position: fixed;
        inset: 0;              /* top:0 right:0 bottom:0 left:0 */
        z-index: 0;            /* behind app */
        pointer-events: none;  /* IMPORTANT: never blocks clicks on product buttons */
      }

      /* =============================
         APP ROOT WRAPPER
         ============================= */

      /* Put the app ABOVE the canvas */
      #app {
        position: relative;
        z-index: 1;
        min-height: 100vh;
      }

      /* Optional: a tiny helper banner at top that doesn’t interfere with the app */
      .spark-hint {
        position: sticky;
        top: 0;
        z-index: 2;
        display: flex;
        justify-content: center;
        padding: 10px 12px;
        pointer-events: none; /* banner doesn’t block clicks */
      }

      .spark-hint span {
        pointer-events: none;
        font-size: 13px;
        color: #374151;
        background: rgba(255, 255, 255, 0.72);
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: 999px;
        padding: 6px 12px;
        backdrop-filter: blur(8px);
      }
    </style>
  </head>

  <body>
    <!-- The spark canvas sits behind everything -->
    <canvas id="spark-canvas" aria-hidden="true"></canvas>

    <!-- Small instruction banner -->
    <div class="spark-hint">
      <span>Move your mouse ✨ click to “spark” the background</span>
    </div>

    <!-- App wrapper (keeps your product UI above the canvas) -->
    <div id="app">
      <!--
        React / JS bundle mounts here.
        If products disappear, it usually means AppEntry didn't load correctly (path/base issue).
      -->
      <div id="root"></div>

      <noscript>
        This site needs JavaScript enabled to display products.
      </noscript>
    </div>

    <!--
      This is your built app bundle.
      IMPORTANT:
      - Keep it "defer" so the HTML parses first.
      - Do NOT rename this file unless you also update this reference.
    -->
    <script src="./AppEntry-ff4ae59a90a1b1b6314d086b5393f432.js" defer></script>

    <script>
      /*
        Interactive spark background.
        Designed to be:
        - Non-blocking (pointer-events: none on canvas)
        - Lightweight (particle cap)
        - Respectful of accessibility (prefers-reduced-motion)
      */
      (function () {
        "use strict";

        const canvas = document.getElementById("spark-canvas");
        const ctx = canvas.getContext("2d", { alpha: true });

        // Respect users who prefer reduced motion
        const reduceMotion =
          window.matchMedia &&
          window.matchMedia("(prefers-reduced-motion: reduce)").matches;

        // Track size
        let w = 0;
        let h = 0;
        let dpr = 1;

        function resize() {
          w = window.innerWidth;
          h = window.innerHeight;
          dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));

          canvas.width = Math.floor(w * dpr);
          canvas.height = Math.floor(h * dpr);
          canvas.style.width = w + "px";
          canvas.style.height = h + "px";

          // Scale drawing for crispness on high-DPI screens
          ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        }

        window.addEventListener("resize", resize, { passive: true });
        resize();

        // Particle system
        const particles = [];
        const MAX_PARTICLES = 140;

        function addSpark(x, y, count, power) {
          if (reduceMotion) return;

          for (let i = 0; i < count; i++) {
            if (particles.length >= MAX_PARTICLES) particles.shift();

            const angle = Math.random() * Math.PI * 2;
            const speed = (Math.random() * 0.8 + 0.2) * power;

            particles.push({
              x,
              y,
              vx: Math.cos(angle) * speed,
              vy: Math.sin(angle) * speed,
              r: Math.random() * 2.2 + 0.8,
              life: 1,
              decay: Math.random() * 0.02 + 0.01,
            });
          }
        }

        // Mouse trail
        window.addEventListener(
          "mousemove",
          (e) => addSpark(e.clientX, e.clientY, 2, 1.2),
          { passive: true }
        );

        // Click burst
        window.addEventListener(
          "click",
          (e) => addSpark(e.clientX, e.clientY, 28, 3.2),
          { passive: true }
        );

        // Animation loop
        function tick() {
          ctx.clearRect(0, 0, w, h);

          for (let i = particles.length - 1; i >= 0; i--) {
            const p = particles[i];

            p.x += p.vx;
            p.y += p.vy;
            p.vx *= 0.98;
            p.vy *= 0.98;
            p.life -= p.decay;

            if (p.life <= 0) {
              particles.splice(i, 1);
              continue;
            }

            // soft glow dot
            ctx.globalAlpha = Math.max(0, p.life);
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
            ctx.fillStyle = "rgba(99, 102, 241, 0.55)";
            ctx.fill();
          }

          ctx.globalAlpha = 1;
          requestAnimationFrame(tick);
        }

        tick();
      })();
    </script>
  </body>
</html>
